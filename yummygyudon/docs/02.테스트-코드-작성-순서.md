## 01. 테스트 작성 순서

순서를 정할 땐,
아래와 같은 순서로 진행하는 것이 바람직합니다.
- 쉬운 경우 👉 어려운 경우
- 예외적인 경우 👉 정상적인 경우

가장 구현하기 쉬운 경우부터 시작하게 되면
"빠르게" 테스트를 통과시키고 다음 테스트를 진행할 수 있게 됩니다.

<br/>

< 한 눈에 보기 >
```
- 쉽고 단순한 것부터 테스트
- 테스트 케이스 추가하면서 구현 일반화

- 코드 정리 (중복 제거 || 변수화)

- 예외 상황 처리

(... 다음 테스트 선택 & 반복)

⚠️ 이 때, 어느정도 구현 흐름이 파악되고 리팩토링이 필요하다고 생각되면 "다음 테스트 추가 전에" 리팩토링을 진행합니다.
```

<br/>

> 🤔 **"단순한 테스트부터" 시작해야 하는 이유**

**초반**부터 <u>다양한 조합에 대해 검사하는 **복잡한 상황**</u>을 테스트로 추가하면 <br/>
해당 테스트를 통과하기 위해 <u>처음부터 구현해야 할 코드가 많아지는</u> 문제 발생

이 때, 보통의 개발자는 <br/>
한 번에 많은 코드 작성 ➡️ 자신도 모르게 버그를 유발 & 이후 해당 버그 해결을 위한 불필요한 시간 낭비

<br>

> 💥 **"예외상황 먼저" 테스트해야 하는 이유**

예외 상황을 고려하지 않고 구현을 한 후,
중간에 예외 처리를 하고자 한다면 아래와 같은 문제가 발생할 수 있습니다.

- 예외 처리를 위한 "**코드 구조 개편**"
- 예외 처리를 위한 "**조건문 중복 추가**"

초반에 예외 상황을 테스트함으로서 <br/>
"예외 상황에 따른 `if-else` 구조가 **미리**" 만들어지기 때문에,

<u><선 구현-후 예외대응></u>보다 "**코드 구조 변동성**"이 낮아지고<br/>
위에 대한 문제 발생 위험을 낮출 수 있습니다.

<br/>

### ※ 완급 조절
---

사실 처음 TDD를 도입하여 구현할 때 가장 어려운 것들 중 하나가 바로 "**한 번에 얼마만큼의 코드를 작성해야 하는가?**" 입니다.

이 때 아래 순서에 집중하여 생각하면 도움이 될 것입니다.
1. **정해진 값** Return
2. 정해진 값 Return + "**값 비교**" 활용
3. "다양한 테스트" 추가 👉 구현 "**일반화**"

뻔한 구현일지라도 위 단계를 거치는 것은 곧 바로 구현하는 것과 차이가 극명하게 존재합니다.

테스트를 만들고 통과되도록 만드는 과정에서<br/> 
"**구현이 막히는 시점**"과 "**한 번에 많은 코드를 구현하다가 구현을 실패**하는 시점"이 오기도 합니다.


이 때, 위 방식과 같은 TDD가 익숙해진다면
**상황에 따라 구현 속도와 양을 조절**할 수 있게되어 개발 생산성을 더욱 높일 수 있게 됩니다.

<br/>

### ※ 리팩토링
---

매번 강조되지만 "테스트 통과 이후"에는 리팩토링을 진행하면 됩니다.

단, 매번 리팩토링을 진행하는 것은 자칫 효율성/생산성이 오히려 저하될 위험이 있기 때문에<br/>
적당히 리팩토링 후보가 보이면 진행하는 것이 좋습니다.

이 때, 가장 빈번한 케이스가 바론 "**코드 중복**(**Code Duplication**)"입니다.

코드 중복에 대한 리팩토링으로<br/>
코드가 길어지는 상황을 피할 수도 있으며 일괄적인 관리가 가능하다는 이점도 얻을 수 있게 됩니다.<br/>
(단, 지나칙 코드 중복 제거는 오히려 관리 요소가 너무 많아지는 문제가 발생할 수 있으니 상황에 맞게 진행해야 합니다.)

위와 같이 TDD 과정에서 지속적인 리팩토링으로 "**개발 생산성**" & "**코드 가독성**" & "**유지 보수성**"이 향상되는 이점을 얻을 수 있으니 매우 중요한 요소라고 볼 수 있습니다.

> 🕖 테스트 대상 코드 - **리팩토링 시점**

테스트 대상 코드에서 간단히 아래와 같이 생각하면 편리할 것 입니다.
- **즉시** :: _작은 리팩토링 요소_
  - 상수 👉 변수
  - 변수 이름 변경 
- **흐름 파악 이후** :: _큰 규모의 리팩토링 요소_
  - 메서드 추출
  - 메서드 구조 개편

<br/>
<br/>

## 02. 테스트 목록

흔히 진행되는 QA와 같이 테스트도 마찬가지입니다.<br/>
어찌보면 같은 목적을 위해 같은 행위를 한다는 것에서 동일한 요소로 귀결될 수도 있을 것 같습니다.

어쨋든 TDD를 시작할 때, "테스트 목록"을 미리 정해놓는 것은 아주 효율적입니다.

1. 테스트할 "**내용**" 정리
2. 테스트 "**구현 난이도**" 정리
3. 테스트별 "**예외 발생 위험도**" 정리

이 때, 개발/테스트 과정에서 새로운 테스트 사례를 발견하게 되는 경우도 놓쳐선 안되며<br/>
상/하위 계층적으로 나누어 체계적으로 진행하는 것이 좋습니다.
- 새로 발견된 테스트 사례에 대한 즉각적인 추가
- 테스트 군집화 & 계층화 👉 하위 세부 테스트별 통과 여부 추적

단, 테스트 목록을 작성했다고 해서<br/>
모든 테스트를 한 번에 하는 것은 바람직하지 않습니다.<br/>
(구현 **초기** 원활한 **리팩토링 불가능** & 방대한 양으로 인한 **리팩토링 심리적 저항**)

<br/>

> 🛑 구현이 막힌다면 ?

TDD를 진행하다보면 필연적으로 구현이 막히는 시점이 발생하게 됩니다.

이럴 경우,<br/>
과감히 코드를 지우고 미련 없이 다시 시작하는 것이 좋을 수 있습니다.

이를 통해 이전에 어떤 순서로 테스트 코드를 작성했는지 파악하고<br/>
개선 및 순서 변경을 통해 구현을 이어 나갑니다.<br/>
( ⚠️ "**쉬운** 테스트 & **에외 **테스트 FIRST" && "**완급 조절**" ⚠️ )
