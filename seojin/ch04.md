## 기능 명세

우리가 사용자에게 제공할 기능은 크게 입력과 결과이다.

여기서 결과는 상황에 따라 달라지는데, 성공 또는 실패 뿐만 아니라, **Exception**과  **변경**도 포함이다. 만약에 회원가입을 했을 경우, DB에 추가된 변경 내역을 조회하여 정보가 제대로 삽입되었는지 확인해보아야한다.

예를 들어 회원 가입 기능을 구현할 때 상황에 따른 입력과 결과는 다음과 같다.

- 입력 : ID, PW, 이름, 이메일
- 결과 : 이미 존재하는 ID Exception, [회원 일련 번호 리턴, 회원정보 DB 저장 여부]

## 설계 과정을 지원하는 TDD

ch03과 ch04의 예제에서 TDD를 작성하는 과정에서 아래와 같은 과정을 거쳤다.

1. 테스트 대상이 될 클래스 이름 지정
2. 테스트 코드에서 호출할 메서드 이름를 고민
3. 매서드 파라미터
4. 실행 결과 검증

이렇게 입출력이 코드에 반영되는 과정에서 기능의 이름, 파라미터, 리턴 타입 등이 결정되고, 이는 기능 설계과정과 연결된다.

## 필요한 만큼 설계

**TDD는 딱 필요한 만큼만 코드를 작성한다.**

앞선 ch3의 예시에서 처음 테스트는 만료일 계산이었다.

이 때 파라미터는 납부일과 납부액 단 두가지였다. 이후 테스트 사례가 추가되면서 첫 납부일에 대한 정보가 필요하게 되어 납부일과 납부액, 첫 납부일을 담는 객체를 만들어 파라미터로 전해주도록 바꾸었다.

기능 실행 결과도 이와 유사하게 필요한 부분만 추가한다. 예를 들어 회원가입 TDD를 작성할 때, 초반부터 ‘중복된 ID에 대한 검사를 해야지’ 하고 앞서서 DupldException을 추가하지말고, 우선 자잘한 기능(ex ID나 비밀번호 글자 수)에 대한 결과부터 확인한다. 나중에 중복 ID를 검사하는 테스트를 추가할 때 DupldException을 작성한다.

## 기능명세 구체화

테스트코드를 위해 개발자는 기획자의 스토리보드, 와이어 프레임을 전달받는다. 문서만으로는 기능을 구현하기엔 생략된 부분이 많다.

예를 들어 ch 3의 예시의 경우, 요구사항에서 서비스 만료일은 납부일 한달 후 였다.

이 때 개발자는 테스트코드를 작성하다가 1월 31일 납부했을 경우, 만료일이 2월 28일인지, 30일 뒤인 3월 2일인지 헷갈리게 된다. 또한 윤년일 경우 2월 29일인지에 대한 의문이 추가된다.

이렇게 점진적으로 기능을 추가하는 상황에서 구현하기 모호한 상황을 만나게 된다. 이 때 기획자와 소통하여 요구사항을 명확하게 파악하여야한다. 이러한 소통 후 이를 구체적인 예시로 바꾸어 테스트 코드에 반영할 수 있다.